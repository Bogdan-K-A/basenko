# Настройка Wayforpay для корректной работы

## Проблема

После нажатия на кнопку оплаты сразу открывалась страница благодарности, а затем Wayforpay в новой вкладке.

## Решение

Теперь при нажатии на кнопку оплаты:

1. Открывается только страница оплаты Wayforpay
2. После успешной оплаты пользователь перенаправляется на страницу благодарности
3. Информация о выбранном плане сохраняется в localStorage

## Что нужно сделать

### 1. Обновить домен в конфигурации

Откройте файл `src/config/site.js` и замените:

```javascript
domain: "https://yourdomain.com", // или http://localhost:5173 для разработки
```

На ваш реальный домен:

```javascript
domain: "https://www.basenko.team/",
```

### 2. Настроить Wayforpay

В панели управления Wayforpay нужно настроить:

#### Для базового плана (кнопка b90a054f1359d):

- **Return URL**: `https://www.basenko.team/thank-you`
- **Cancel URL**: `https://www.basenko.team/` (главная страница)

#### Для премиум плана (кнопка b7637b12a75a7):

- **Return URL**: `https://www.basenko.team/thank-you`
- **Cancel URL**: `https://www.basenko.team/` (главная страница)

### 3. Проверить настройки

Убедитесь, что в Wayforpay:

- ✅ Включены уведомления о платежах
- ✅ Настроены правильные URL для возврата
- ✅ Кнопки привязаны к правильным товарам

## Как это работает

1. **Пользователь нажимает кнопку** → план сохраняется в localStorage, открывается Wayforpay
2. **Производит оплату** → Wayforpay обрабатывает платеж
3. **После успешной оплаты** → Wayforpay перенаправляет на `/thank-you`
4. **Страница благодарности** → получает план из localStorage и показывает соответствующую информацию

## Тестирование

### Локально:

- Домен: `http://localhost:5173`
- Return URL: `http://localhost:5173/thank-you`

### На хостинге:

- Домен: `https://www.basenko.team`
- Return URL: `https://www.basenko.team/thank-you`

## Возможные проблемы

1. **404 ошибка на странице благодарности** → проверьте `.htaccess` файл
2. **Не работает перенаправление** → проверьте настройки Return URL в Wayforpay
3. **Неправильный план отображается** → проверьте localStorage в консоли браузера

## Поддержка

Если возникли проблемы:

1. Проверьте консоль браузера на ошибки
2. Убедитесь, что `.htaccess` файл загружен на хостинг
3. Проверьте настройки Wayforpay в панели управления
4. Проверьте localStorage в DevTools браузера
